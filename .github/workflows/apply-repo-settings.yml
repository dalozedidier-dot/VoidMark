name: apply-repo-settings

on:
  workflow_dispatch:
  push:
    paths:
      - ".github/settings.yml"
      - ".github/workflows/apply-repo-settings.yml"

jobs:
  apply:
    runs-on: ubuntu-latest
    env:
      REPO_SETTINGS_TOKEN: ${{ secrets.REPO_SETTINGS_TOKEN }}
    steps:
      - name: Token missing (skip)
        if: ${{ env.REPO_SETTINGS_TOKEN == '' }}
        run: |
          echo "REPO_SETTINGS_TOKEN is not set; skipping apply-repo-settings."
      - uses: actions/checkout@v4
        if: ${{ env.REPO_SETTINGS_TOKEN != '' }}
      - name: Apply repository settings
        if: ${{ env.REPO_SETTINGS_TOKEN != '' }}
        uses: mooseburgr/repository-settings-action@v0.1.3
        with:
          token: ${{ env.REPO_SETTINGS_TOKEN }}
          settings: .github/settings.yml
